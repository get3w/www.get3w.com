<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="width=device-width,user-scalable=no" name="viewport">
    <title>网站标题</title>
    <link rel="stylesheet" href="css/swiper.min.css">
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <script language="javascript" type="text/javascript" src="js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="js/public.js"></script>
    <script language="javascript" type="text/javascript" src="js/swiper.min.js"></script>
    <script language="javascript" type="text/javascript" src="js/custom.js"></script>
    <script language="javascript" type="text/javascript" src="js/jquery.cookie.js"></script> 
    <script language="javascript" type="text/javascript" src="js/prefixfree.min.js"></script>
    <script type="text/javascript">
        $(function () {
            var userName = getCookie("userName");
            //var userName = $.cookie("userName");
            if (userName == null || userName == "") {
                //window.location.href = "login.html";
                $(".displayName").html("<a href=\"login.html\">登录</a>");
            } else {

                //var paramData = { username: username, password: password };
                //var url = "http://192.168.1.234:819/api/users/" + userName;
                var url = "http://118.26.238.245/webapi/api/users/" + userName;
                $.ajax
                ({
                    url: url,
                    type: "get",
                    dataType: "jsonp",
                    //data: JSON.stringify(paramData),//$("#frm").serializeArray(),
                    success: function (data) {
                        $(".displayName").text(data.user.displayName);
                        $(".userAvatar").text(data.user.avatarUrl);
                    },
                    error: function myfunction(XMLHttpRequest, textStatus, errorThrown) {
                        //alert(XMLHttpRequest.state);
                        //alert(XMLHttpRequest.readyState);
                        //alert(textStatus);
                    }
                });
            }

            $("#layout").click(function () {
                delCookie("userName");
                //$.cookie("userName", null); // 删除 cookie
                window.location.reload(true);
                $(".mLayerBg").fadeIn(300);
                $(".perLayer").addClass("perLayerIn");
            });
        })
    </script>
</head>
<body>
    <div class="mTop">
        <a href="#" class="mTop_perIcon"></a>
        中国移动网上党校
        <a href="#" class="mTop_serIcon"></a>
        <a href="#" class="mTop_moreIcon"></a>
    </div>
    <div class="mNav">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide"><a class="mNav_a mNav_cuta" href="#">时政要闻</a></div>
                <div class="swiper-slide"><a class="mNav_a" href="#">集团信息</a></div>
                <div class="swiper-slide"><a class="mNav_a" href="#">基层动态</a></div>
                <div class="swiper-slide"><a class="mNav_a" href="#">专题专栏</a></div>
                <div class="swiper-slide"><a class="mNav_a" href="#">十三五会议</a></div>
            </div>
        </div>
    </div>
    <div class="mkFocus autoImg">
        <div class="swiper-container mkTopFocus">
            <div class="swiper-wrapper">
                <div class="swiper-slide"><a href="ContentInfo.html"><img src="images/mban1.jpg"><div class="mBanText">数读“习近平”这一年</div></a></div>
                <div class="swiper-slide"><a href="ContentInfo.html"><img src="images/mban1.jpg"><div class="mBanText">数读“习近平”这一年</div></a></div>
                <div class="swiper-slide"><a href="ContentInfo.html"><img src="images/mban1.jpg"><div class="mBanText">数读“习近平”这一年</div></a></div>
                <div class="swiper-slide"><a href="ContentInfo.html"><img src="images/mban1.jpg"><div class="mBanText">数读“习近平”这一年</div></a></div>
                <div class="swiper-slide"><a href="ContentInfo.html"><img src="images/mban1.jpg"><div class="mBanText">数读“习近平”这一年</div></a></div>
            </div>
            <div class="swiper-pagination"></div>
        </div>
    </div>
    <ul class="hm_ul imgBlock clearfix">
        <li class="clearfix">
            <a href="ContentInfo.html" class="fl"><img src="images/hm_img1.jpg"></a>
            <div class="hm_ulTxt">
                <strong><a href="ContentInfo.html">日韩媒体关注李克强记者会 亲切“围棋迷”总理</a></strong>
                <span class="hm_ulTime">2016-03-17</span>
            </div>
        </li>
        <li class="clearfix">
            <a href="ContentInfo.html" class="fl"><img src="images/hm_img2.jpg"></a>
            <div class="hm_ulTxt">
                <strong><a href="ContentInfo.html">习近平：控制办奥成本 不搞铺张奢华</a></strong>
                <span class="hm_ulTime">2016-03-17</span>
            </div>
        </li>
        <li class="hm_liNoImg">
            <strong><a href="ContentInfo.html">习近平：控制办奥成本 不搞铺张奢华</a></strong>
            <p>过去一年，我国发展面临多重困难和严峻挑战。在以习近平同志...</p>
            <span class="hm_ulTime">2016-03-17</span>
        </li>
        </li>
        <li class="hm_liNoImg">
            <strong><a href="ContentInfo.html">习近平：控制办奥成本 不搞铺张奢华</a></strong>
            <p>过去一年，我国发展面临多重困难和严峻挑战。在以习近平同志...</p>
            <span class="hm_ulTime">2016-03-17</span>
        </li>
        <li class="clearfix">
            <a href="ContentInfo.html" class="fl"><img src="images/hm_img1.jpg"></a>
            <div class="hm_ulTxt">
                <strong><a href="ContentInfo.html">习近平：控制办奥成本 不搞铺张奢华</a></strong>
                <span class="hm_ulTime">2016-03-17</span>
            </div>
        </li>
        <li class="hm_liNoImg">
            <strong><a href="ContentInfo.html">习近平：控制办奥成本 不搞铺张奢华</a></strong>
            <p>过去一年，我国发展面临多重困难和严峻挑战。在以习近平同志...</p>
            <span class="hm_ulTime">2016-03-17</span>
        </li>
    </ul>
    <div class="ftEmpty"></div>
    <ul class="footer">
        <li><a class="foot_a on" href="index.html"><img src="images/ft_icon1.png"><img class="foot_aimg" src="images/ft_icon1a.png">首页</a></li>
        <li><a class="foot_a" href="business.html"><img src="images/ft_icon2.png"><img class="foot_aimg" src="images/ft_icon2a.png">业务</a></li>
        <li><a class="foot_a" href="OrgDynamics.html"><img src="images/ft_icon3.png"><img class="foot_aimg" src="images/ft_icon3a.png">组织</a></li>
    </ul>

    <!--弹出层信息-->
    <div class="mLayerBg hidden"></div>
    <div class="mLayerMenu hidden">
        <i></i>
        <ul>
            <!-- qt 修改扫一扫链接， 调用接口， 添加两个测试get set的入口 begin -->
            <li><a class="mLayMenu_a" onclick="CallScan();return false;" href="#"><img src="images/top_icon4.png">扫一扫</a></li>
            <li><a class="mLayMenu_a" href="messAge.html"><img src="images/top_icon5.png">消息</a></li>
            <li><a class="mLayMenu_a" onclick="testSet();return false;" href="#"><img src="images/top_icon4.png">测试set</a></li>
            <li><a class="mLayMenu_a" onclick="testGet();return false;" href="#"><img src="images/top_icon4.png">测试get</a></li>
            <!-- qt 修改扫一扫链接， 调用接口， 添加两个测试get set的入口 end -->
        </ul>
    </div>

    <!--个人中心弹出-->
    <div class="perLayer">
        <div class="per_head clearfix">
            <div class="perHdImg autoImg"><img src="images/pheader.jpg" class="userAvatar"></div>
            <div class="perInfo2">
                <strong class="displayName">欧阳娜娜</strong>
                <p>中国移动浙江分公司<br>党支部委员</p>
            </div>
        </div>
        <ul class="perMenu">
            <li><a href="userInfo.html" class="perMenu_a"><img src="images/per_icon1.png"><img class="per_cutImg" src="images/per_icon1a.png">基本资料</a></li>
            <li><a href="messAge.html" class="perMenu_a"><img src="images/per_icon2.png"><img class="per_cutImg" src="images/per_icon2a.png">消息通知</a></li>
            <li><a href="partyPayMenu.html" class="perMenu_a"><img src="images/per_icon3.png"><img class="per_cutImg" src="images/per_icon3a.png">党费缴纳</a></li>
            <li><a href="ChangeRole.html" class="perMenu_a"><img src="images/per_icon4.png"><img class="per_cutImg" src="images/per_icon4a.png">切换角色</a></li>
            <li><a href="changePassword.html" class="perMenu_a"><img src="images/per_icon5.png"><img class="per_cutImg" src="images/per_icon5a.png">账号安全</a></li>
            <li><a href="setting.html" class="perMenu_a"><img src="images/per_icon6.png"><img class="per_cutImg" src="images/per_icon6a.png">设置</a></li>
            <li><a href="javascript:;" class="perMenu_a perMenu_Cuta" id="layout"><img src="images/per_icon7.png"><img class="per_cutImg" src="images/per_icon7a.png">退出登录</a></li>
        </ul>
        <div class="perBomLg"><img src="images/lg_yd.jpg"></div>
    </div>
    <script>
        var swiper = new Swiper('.mkTopFocus', {
            pagination: '.swiper-pagination',
            slidesPerView: 1,
            paginationClickable: true,
            autoplay: 4500,
            autoplayDisableOnInteraction: false,
            loop: true
        });

        var swiper = new Swiper('.mNav .swiper-container', {
            slidesPerView: 'auto',
            paginationClickable: true,
            freeMode: true
        });
    </script>
    <!-- qt 引入接口js，添加接口方法 CallScan SaveToken GetToken begin -->
    <script type="text/javascript" src="qtlib/cordova.js"></script>
    <script type="text/javascript">
        // 调用扫一扫界面
        function CallScan() {
            document.addEventListener('deviceready', function () {
                cordova.plugins.barcodeScanner.scan(
                    function (result) {
                        //console.dir(result);
                        //alert(123);
                        //alert(result);
                        alert("We got a barcode\n" +
                        "Result: " + result.text + "\n" +
                        "Format: " + result.format + "\n" +
                        "Cancelled: " + result.cancelled);
                    },
                    function (error) {
                        console.log(error);
                    }
                );
            }, false);
        }
        // key value 都是 字符串
        function SaveToken(key, value) {
            document.addEventListener('deviceready', function () {
                cordova.plugins.savedata.save(key, value,
                    function (result) {
                        console.log(result);
                    },
                    function (error) {
                        console.log(error);
                    }
                );
            }, false);
        }
        // key 是字符串， success成功回调，有一个参数，参数为key对应的value字符串，failed为失败回调
        function GetToken(key, success, failed) {
            document.addEventListener('deviceready', function () {
                cordova.plugins.savedata.get(key,
                    success,
                    failed
                );
            }, false);
        }

        function testSet() {
            var key = "abc";
            var value = "hello";
            SaveToken(key, value);
            console.log("set key : " + key + " with value : " + value);
        }

        function testGet() {
            GetToken("abc", function (value) {
                console.log("get value " + value);
            }, function (error) {
                console.log("get failed " + error);
            });
        }
    </script>
    <!-- qt 引入接口js，添加接口方法 CallScan SaveToken GetToken end -->
</body>
</html>
